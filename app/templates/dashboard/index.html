{% extends 'layouts/base.html' %}
{% block head %}
<style>
    :root {
        --accent: {{ settings.accent_color if settings else '#1f2937' }};
    }
    body {
        background: {% if settings and settings.theme == "dark" %} #111 {% else %} white {% endif %};
        color: {% if settings and settings.theme == "dark" %} white {% else %} black {% endif %};
    }
    button {
        background: var(--accent);
        color: white;
        border-radius: 6px;
        padding: 6px 10px;
    }
</style>
{% endblock %}
{% block content %}
<h1>Dashboard</h1>
<section>
    <h2>Add project</h2>
    <form method="post" action="{{ url_for('dash.new_project') }}">
        <input name="title" placeholder="Project title" required>
        <textarea name="description" placeholder="Short description"></textarea>
        <input name="github_url" placeholder="GitHub URL (optional)"></input>
        <input name="tags" placeholder="comma separated tags">
        <button type="submit">Add</button>
    </form>
</section>


<section>
    <h2>Your projects</h2>
    <ul>
    {% for p in projects %}
    <li>
        <strong>{{ p.title }}</strong> - {{ p.description }}
        <form method="post" action="{{ url_for('dash.delete_project', project_id=p.id) }}" style="display:inline">
            <button type="submit">Delete</button>
        </form>
    </li>
    {% else %}
    <li>No projects yet.</li>
    {% endfor %}
    </ul>
</section>


<section>
    <h2>Export</h2>
    <form method="post" action="{{ url_for('dash.export_portfolio') }}">
        <button type="submit">Export static HTML</button>
    </form>
</section>

<section>
    <h2>Theme Settings</h2>

    <form method="post" action="{{ url_for('dash.update_settings') }}">
        <label>Theme</label>
        <select name="theme">
            <option value="clean">Clean</option>
            <option value="dark">Dark</option>
            <option value="minimal">Minimal</option>
        </select>

        <label>Accent Color</label>
        <input type="color" name="accent_color" value="#1f2937">

        <button type="submit">Save Theme</button>
    </form>
</section>

{% endblock %}